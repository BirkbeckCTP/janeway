{% extends "core/base.html" %}
{% load i18n %}
{% load recaptcha2 %}
{% load orcid %}
{% load static from staticfiles %}

{% block title %}{% trans "Login" %}{% endblock title %}

{% block head %}
    {% recaptcha_init %}
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <div class="card">
                <div class="card-block">
                    <div class="col-md-12">
                        {% if settings.ENABLE_ORCID %}
                        <h2 class="text-center">{% trans "Log in with your account" %}</h2>
                        <p class="text-center">
                          <a class="connect-orcid-link" href="{{ settings.ORCID_URL }}?client_id={{ settings.ORCID_CLIENT_ID }}&response_type=code&scope=/authenticate&redirect_uri={% orcid_redirect_uri %}"><img class="orcid-id-logo" src="{% static "common/img/icons/orcid_16x16.png" %}" width='16' height='16' alt="ORCID iD icon"/>{% trans "Register or Connect your ORCID iD" %}</a><br/>
                          <a class="help-text" href="#" data-toggle="modal" data-target="#modal-orcid-info">More information about ORCID.</a>
                        </p>
                        {% endif %}
                        <form method="POST">
                            {% include "common/elements/static-error-messages.html" with form=form %}
                            {% csrf_token %}
                            <div class="form-group">
                                <label>{% trans form.fields.user_name.label %}</label>
                                <input name="user_name" type="text" placeholder="janeway@voyager.com"
                                       class="form-control">
                                <label>{% trans form.user_pass.label %}</label>
                                <input type="password" placeholder="Password" name="user_pass" class="form-control">
                                <br />
                                {{ form.captcha }}
                            </div>
                            <p>
                                <button type="submit"
                                        class="btn btn-primary btn-block">{% trans "Log in" %}</button>
                            </p>
                        </form>
                        <p class="text-center"><a
                                href="{% url 'core_get_reset_token' %}">{% trans "Forgotten your password?" %}</a>
                        </p>

                        <p class="text-center">
                            <a href="{% url 'core_register' %}">{% trans "Register a new account" %}</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modal-orcid-info" tabindex="-1" role="dialog" aria-labelledby="modal-orcid-info"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans "ORCID&reg; iD" %}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                  <p>{% if request.journal %}{{ request.journal.name }}{% else %}{{ request.press.name }}{% endif %}
                  {% blocktrans with 'https://orcid.org/blog/2017/02/20/whats-so-special-about-signing' as orcid_url %}
                  is collecting your ORCID iD so we can display your work in your ORCID record, making it easy for you to share this trusted information with other systems and profiles. When you click the “Authorize” button, we will ask you to share your iD using an authenticated process: either by registering for an ORCID iD or, if you already have one, by signing into your ORCID account, then granting us permission to get your ORCID iD. We do this to ensure that you are correctly identified and securely connecting your ORCID iD. Learn more about <a target="_blank" href="{{ orcid_url }}">what’s so special about signing in.</a></p>
                  {% endblocktrans %}
                </div>
            </div>
        </div>
    </div>
{% endblock body %}
